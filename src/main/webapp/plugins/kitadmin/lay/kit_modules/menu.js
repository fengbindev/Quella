/** kitadmin-v2.1.2 MIT License By http://kit.zhengjinfan.cn Author Van Zheng */
;"use strict";layui.define(["jquery","utils","axios"],function(i){var e=layui.jquery,n=layui.utils,a=layui.lodash,t=layui.axios,o=n.localStorage,r=function(){this.config={elem:void 0,onClicked:void 0,dynamicRender:!1,data:[],remote:{url:void 0,method:"get"},cached:!1,cacheKey:"KITADMINMENU",isJump:!0,onlyOne:!0},this.version="1.0.2"},l=".kit-menu",s=".kit-menu-item";r.prototype.set=function(i){return e.extend(!0,this.config,i),this},r.prototype.render=function(){var i=this,e=i.config;if(e.dynamicRender)if(e.data.length>0)o.setItem(e.cacheKey,a),u.renderHTML(e.elem,e.data,function(){i.bind()});else{var n=!1;if(e.cached){var a=o.getItem(e.cacheKey);null!==a&&void 0!==a&&(n=!0,u.renderHTML(e.elem,a,function(){i.bind()}))}n||u.loadData(e.remote,function(n){o.setItem(e.cacheKey,n),u.renderHTML(e.elem,n,function(){i.bind()})})}else i.bind();return i},r.prototype.bind=function(){var i=this.config;if(e(l).find(s).each(function(){var a=e(this),t=a.children("a");"kit-menu"===a.parent()[0].className&&a.attr("lay-one",!0);var o=a.find("ul.kit-menu-child").length>0;o&&t.addClass("child");var r=a.attr("lay-id");""!==r&&void 0!==r||(r=n.randomCode(),a.attr("lay-id",r)),t.off("click").on("click",function(u){if(layui.stope(u),o?(a.hasClass("layui-show")?a.removeClass("layui-show"):a.addClass("layui-show"),i.onlyOne&&a.attr("lay-one")&&a.siblings().removeClass("layui-show")):(e(l).find(s).removeClass("layui-this"),a.addClass("layui-this")),n.isFunction(i.onClicked)&&i.onClicked({elem:a,hasChild:o,data:{href:t.attr("href"),layid:r}}),!i.isJump)return!1})}),void 0!==location.hash&&""!==location.hash&&null!==location.hash){var a="#"+layui.router(location.hash).href.split("?")[0],t=e(l).find('a[href="'+a+'"]');t.length>0&&t.parents("li").each(function(){var i=e(this);i.hasClass("layui-show")||i.children("a").click()})}return this},r.prototype.removeCache=function(i){var e=this.config;i=i||e.cacheKey,n.localStorage.removeItem(i)};var u={renderHTML:function(i,a,t){var o=['<ul class="kit-menu">'];if(this.recursion(o,a,0),o.length>0){o.push("</ul>");var r=e(i);if(0===r.length)return void n.error("Menu config error:请配置elem参数.");r.html(o.join("")),n.isFunction(t)&&t()}},recursion:function(i,e,n){var t=this,o=[];a.forEach(e,function(i,e){i.pid===n&&o.push(i)}),o.length>0&&a.forEach(o,function(e){var n=e.open?"layui-show":"";i.push('<li class="kit-menu-item '+n+'">');var o=a.isEmpty(e.path)?"javascript:;":e.path;e.blank?i.push('<a href="'+o+'" target="_blank">'):i.push('<a href="'+o+'">'),i.push('<i class="layui-icon">'+e.icon+"</i> "),i.push("<span>"+e.title+"</span>"),i.push("</a>");var r=e.children;void 0!==r&&null!==r&&r.length>0&&(i.push('<ul class="kit-menu-child kit-menu-child layui-anim layui-anim-upbit">'),t.recursion(i,r,e.id),i.push("</ul>")),i.push("</li>")})},loadData:function(i,e){t(i).then(function(i){if(500===i.status)throw new Error(i.statusText);return i.data}).then(function(i){e(i)}).catch(function(i){n.error(i)})}};i("menu",new r)});
//# sourceMappingURL=menu.js.map
