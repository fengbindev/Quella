/** kitadmin-v2.1.0 MIT License By http://kit.zhengjinfan.cn Author Van Zheng */
;"use strict";layui.define(["utils","jquery","lodash","nprogress","layer"],function(e){var c=layui.utils,i=c.localStorage,o=i.setItem,t=i.getItem,v=layui.jquery,n=layui.lodash,f=layui.layer,h=v(window),p=void 0,r=function(){this.config={name:"KITADMINROUTE",routerViewId:void 0,beforeRender:void 0,routes:[]},this.version="1.2.1"};r.prototype.set=function(e){return v.extend(!0,this.config,e),this},r.prototype.setRoutes=function(e){var i=this;e.name=e.name||i.config.name,i.config.name=e.name;var t={routes:[]};return v.extend(!0,t,e),n.forEach(t.routes,function(e){e.id=(new Date).getTime()+""+n.random(1e3,9999)}),o(t.name,t.routes),v(window).off("popstate").on("popstate",function(){c.isFunction(e.onChanged)?e.onChanged():i.render()}),i},r.prototype.getRoutes=function(){return t(this.config.name)},r.prototype.getRoute=function(e){var i=this.getRoutes(this.config.name);if(null!=i){e=e||location.hash;var t=layui.router(e).href.split("?"),o=c.find(i,function(e){return e.path===t[0]});return 1<t.length&&(o.component+="?"+t[1],o.path+="?"+t[1]),o}},r.prototype.render=function(e,i,t){var o=this,n=o.config,r=void 0;NProgress.start();var a=f.load(2),s=c.randomCode();if(i&&0<i.length)r=i;else{var u=void 0===n.routerViewId?v("router-view"):v("router-view#"+n.routerViewId);0<u.length&&(u.parent().append('<div id="'+s+'"></div>'),u.remove(),r=v("#"+s),p=r)}void 0===r&&(r=p);var l=o.getRoute(e);function d(){NProgress.done(),a&&f.close(a),c.isFunction(t)&&t()}return void 0!==l?("function"==typeof n.beforeRender&&(l=n.beforeRender(l)),l.iframe?(r.html('<iframe src="'+l.component+'" data-id="'+s+'" style="height: 780px;"></iframe>'),h.on("resize",function(){var e=v(".layui-body").height();v("iframe[data-id="+s+"]").height(e-3)}).resize(),d()):c.tplLoader(l.component,function(e){r.html(e),d(),c.setUrlState(l.name,"#"+l.path)},function(e){var i=['<div class="layui-fluid">','<div class="layui-row">','<div class="layui-col-xs12">','<div class="kit-not-router">',e,"</div>","</div>","</div>","</div>"].join("");r.html(i),d()})):(r.html(['<div class="layui-fluid">','  <div class="layui-row">','    <div class="layui-col-xs12">','      <div class="layui-row">','        <div class="layui-col-md4">&nbsp;</div>','        <div class="layui-col-md4">','          <div class="kit-exception">','            <i class="layui-icon kit-exception-icon">&#xe61c;</i>','            <h3 class="kit-exception-title">:>404 抱歉，你访问的页面不存在</h3>','            <a href="javascript:history.back(-1);" class="layui-btn">返回上一页</a>',"          </div>","        </div>",'        <div class="layui-col-md4">&nbsp;</div>',"      </div>","    </div>","  </div>","</div>"].join("")),NProgress.done(),a&&f.close(a)),o},r.prototype.params=function(){var e=layui.router();if(void 0===e.href)return null;var i=e.href,t=i.substr(i.indexOf("?")+1);if(i===t)return null;var o=t.split("&"),r={};return n.forEach(o,function(e,i){var t=e.split("="),o=t[0],n=t[1];r[o]=n}),r},e("route",new r)});
//# sourceMappingURL=route.js.map
