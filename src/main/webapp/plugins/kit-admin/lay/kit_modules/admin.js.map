{"version":3,"sources":["admin.js"],"names":["mods","layui","element","utils","jquery","$","_","route","tabs","layer","menu","component","kit","elem","loadType","this","version","Admin","config","that","callback","setting","localStorage","undefined","init","type","_private","menuInit","tabsInit","location","hash","setUrlState","sidebar","render","title","direction","url","width","shade","target","_that","attr","dynamicRender","alert","mockjs","inject","APIs","routeInit","r","name","children","path","iframe","addTab","routeOpts","existsByPath","switchByPath","Date","getTime","setRoutes","href","layid","add","getRoute","id","rendered","icon","isJump","onClicked","obj","hasChild","data","method","cached","onChanged","set","isIndex","log","ready","console","exports"],"mappings":"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","file":"admin.js","sourcesContent":["var mods = [\n  'element', 'sidebar', 'mockjs', 'select',\n  'tabs', 'menu', 'route', 'utils', 'component', 'kit'\n];\n\nlayui.define(mods, function(exports) {\n  var element = layui.element,\n    utils = layui.utils,\n    $ = layui.jquery,\n    _ = layui.lodash,\n    route = layui.route,\n    tabs = layui.tabs,\n    layer = layui.layer,\n    menu = layui.menu,\n    component = layui.component,\n    kit = layui.kit;\n\n\n  var Admin = function() {\n    this.config = {\n      elem: '#app',\n      loadType: 'SPA'\n    };\n    this.version = '1.0.0';\n  };\n\n  Admin.prototype.ready = function(callback) {\n    var that = this,\n      config = that.config;\n\n    // 初始化加载方式\n    var getItem = utils.localStorage.getItem;\n    var setting = getItem(\"KITADMIN_SETTING_LOADTYPE\");\n    if (setting !== null && setting.loadType !== undefined) {\n      config.loadType = setting.loadType;\n    }\n\n    kit.set({\n      type: config.loadType\n    }).init();\n\n    // 初始化路由\n    _private.routeInit(config);\n    // 初始化左侧菜单\n    _private.menuInit(config);\n    // 初始化选项卡\n    if (config.loadType === 'TABS') {\n      _private.tabsInit();\n    }\n    // 跳转至首页\n    if (location.hash === '') {\n      utils.setUrlState('主页', '#/');\n    }\n\n    // 处理 sidebar\n    layui.sidebar.render({\n      elem: '#ccleft',\n      //content:'', \n      title: '这是左侧打开的栗子',\n      shade: true,\n      // shadeClose:false,\n      direction: 'left',\n      dynamicRender: true,\n      url: 'views/table/teble2.html',\n      width: '50%', //可以设置百分比和px\n    });\n\n    $('#cc').on('click', function() {\n      var that = this;\n      layui.sidebar.render({\n        elem: that,\n        //content:'', \n        title: '这是表单盒子',\n        shade: true,\n        // shadeClose:false,\n        // direction: 'left'\n        dynamicRender: true,\n        url: 'views/form/index.html',\n        width: '50%', //可以设置百分比和px\n      });\n    });\n    // 监听头部右侧 nav\n    component.on('nav(header_right)', function(_that) {\n      var target = _that.elem.attr('kit-target');\n      if (target === 'setting') {\n        // 绑定sidebar\n        layui.sidebar.render({\n          elem: _that.elem,\n          //content:'', \n          title: '设置',\n          shade: true,\n          // shadeClose:false,\n          // direction: 'left'\n          dynamicRender: true,\n          url: 'views/setting.html',\n          // width: '50%', //可以设置百分比和px\n        });\n      }\n      if (target === 'help') {\n        layer.alert('QQ群：248049395，616153456');\n      }\n    });\n\n    // 注入mock\n    layui.mockjs.inject(APIs);\n\n    // 初始化渲染\n    if (config.loadType === 'SPA') {\n      route.render();\n    }\n\n    // 执行回调函数\n    typeof callback === 'function' && callback();\n  }\n\n  var _private = {\n    routeInit: function(config) {\n      var that = this;\n      // route.set({\n      //   beforeRender: function (route) {\n      //     if (!utils.oneOf(route.path, ['/user/table', '/user/table2', '/'])) {\n      //       return {\n      //         id: new Date().getTime(),\n      //         name: 'Unauthorized',\n      //         path: '/exception/403',\n      //         component: 'views/exception/403.html'\n      //       };\n      //     }\n      //     return route;\n      //   }\n      // });\n      // 配置路由\n      var routeOpts = {\n        // name: 'kitadmin',\n        r: [{\n          path: '/user/index',\n          component: '/views/user/index.html',\n          name: '用户列表',\n          children: [{\n            path: '/user/create',\n            component: 'views/user/create.html',\n            name: '新增用户',\n          }, {\n            path: '/user/edit',\n            component: 'views/user/edit.html',\n            name: '编辑用户',\n          }]\n        }],\n        routes: [{\n          path: '/layui/fly',\n          component: 'https://fly.layui.com/',\n          name: 'Fly',\n          iframe: true\n        }, {\n          path: '/layui',\n          component: 'http://www.layui.com/',\n          name: 'Layui',\n          iframe: true\n        }, {\n          path: '/baidu',\n          component: 'https://www.baidu.com/',\n          name: '百度一下',\n          iframe: true\n        }, {\n          path: '/user/index',\n          component: '/views/user/index.html',\n          name: '用户列表'\n        }, {\n          path: '/user/create',\n          component: 'views/user/create.html',\n          name: '新增用户',\n        }, {\n          path: '/user/edit',\n          component: 'views/user/edit.html',\n          name: '编辑用户',\n        }, {\n          path: '/cascader',\n          component: 'views/cascader/index.html',\n          name: 'Cascader'\n        }, {\n          path: '/',\n          component: 'views/app.html',\n          name: '主页'\n        }, {\n          path: '/user/my',\n          component: 'views/profile.html',\n          name: '用户中心'\n        }, {\n          path: '/inputnumber',\n          component: 'views/inputnumber.html',\n          name: 'InputNumber'\n        }, {\n          path: '/layui/grid',\n          component: 'views/layui/grid.html',\n          name: 'Grid'\n        }, {\n          path: '/layui/button',\n          component: 'views/layui/button.html',\n          name: '按钮'\n        }, {\n          path: '/layui/form',\n          component: 'views/layui/form.html',\n          name: '表单'\n        }, {\n          path: '/layui/nav',\n          component: 'views/layui/nav.html',\n          name: '导航/面包屑'\n        }, {\n          path: '/layui/tab',\n          component: 'views/layui/tab.html',\n          name: '选项卡'\n        }, {\n          path: '/layui/progress',\n          component: 'views/layui/progress.html',\n          name: 'progress'\n        }, {\n          path: '/layui/panel',\n          component: 'views/layui/panel.html',\n          name: 'panel'\n        }, {\n          path: '/layui/badge',\n          component: 'views/layui/badge.html',\n          name: 'badge'\n        }, {\n          path: '/layui/timeline',\n          component: 'views/layui/timeline.html',\n          name: 'timeline'\n        }, {\n          path: '/layui/table-element',\n          component: 'views/layui/table-element.html',\n          name: 'table-element'\n        }, {\n          path: '/layui/anim',\n          component: 'views/layui/anim.html',\n          name: 'anim'\n        }, {\n          path: '/layui/layer',\n          component: 'views/layui/layer.html',\n          name: 'layer'\n        }, {\n          path: '/layui/laydate',\n          component: 'views/layui/laydate.html',\n          name: 'laydate'\n        }, {\n          path: '/layui/table',\n          component: 'views/layui/table.html',\n          name: 'table'\n        }, {\n          path: '/layui/laypage',\n          component: 'views/layui/laypage.html',\n          name: 'laypage'\n        }, {\n          path: '/layui/upload',\n          component: 'views/layui/upload.html',\n          name: 'upload'\n        }, {\n          path: '/layui/carousel',\n          component: 'views/layui/carousel.html',\n          name: 'carousel'\n        }, {\n          path: '/layui/laytpl',\n          component: 'views/layui/laytpl.html',\n          name: 'laytpl'\n        }, {\n          path: '/layui/flow',\n          component: 'views/layui/flow.html',\n          name: 'flow'\n        }, {\n          path: '/layui/util',\n          component: 'views/layui/util.html',\n          name: 'util'\n        }, {\n          path: '/layui/code',\n          component: 'views/layui/code.html',\n          name: 'code'\n        }, {\n          path: '/user/table',\n          component: '/views/table/teble.html',\n          name: 'Table'\n        }, {\n          path: '/user/table2',\n          component: '/views/table/teble2.html',\n          name: '数据表格2'\n        }, {\n          path: '/user/table3',\n          component: '/views/table/teble3.html',\n          name: '数据表格3'\n        }, {\n          path: '/user/form',\n          component: '/views/form/index.html',\n          name: 'Form'\n        }, {\n          path: '/docs/mockjs',\n          component: 'docs/mockjs.html',\n          name: '拦截器(Mockjs)'\n        }, {\n          path: '/docs/menu',\n          component: 'docs/menu.html',\n          name: '左侧菜单(Menu)'\n        }, {\n          path: '/docs/route',\n          component: 'docs/route.html',\n          name: '路由配置(Route)'\n        }, {\n          path: '/docs/tabs',\n          component: 'docs/tabs.html',\n          name: '选项卡(Tabs)'\n        }, {\n          path: '/docs/utils',\n          component: 'docs/utils.html',\n          name: '工具包(Utils)'\n        }, {\n          path: '/views/select',\n          component: 'views/select/index.html',\n          name: 'Select'\n        }, {\n          path: '/exception/403',\n          component: 'views/exception/403.html',\n          name: '403'\n        }, {\n          path: '/exception/404',\n          component: 'views/exception/404.html',\n          name: '404'\n        }, {\n          path: '/exception/500',\n          component: 'views/exception/500.html',\n          name: '500'\n        }]\n      };\n      if (config.loadType === 'TABS') {\n        routeOpts.onChanged = function() {\n          // 如果当前hash不存在选项卡列表中\n          if (!tabs.existsByPath(location.hash)) {\n            // 新增一个选项卡\n            that.addTab(location.hash, new Date().getTime());\n          } else {\n            // 切换到已存在的选项卡\n            tabs.switchByPath(location.hash);\n          }\n        }\n      }\n      // 设置路由\n      route.setRoutes(routeOpts);\n      return this;\n    },\n    addTab: function(href, layid) {\n      var r = route.getRoute(href);\n      if (r) {\n        tabs.add({\n          id: layid,\n          title: r.name,\n          path: href,\n          component: r.component,\n          rendered: false,\n          icon: '&#xe62e;'\n        });\n      }\n    },\n    menuInit: function(config) {\n      var that = this;\n      // 配置menu\n      menu.set({\n        dynamicRender: false,\n        isJump: config.loadType === 'SPA',\n        onClicked: function(obj) {\n          if (config.loadType === 'TABS') {\n            if (!obj.hasChild) {\n              var data = obj.data;\n              var href = data.href;\n              var layid = data.layid;\n              that.addTab(href, layid);\n            }\n          }\n        },\n        elem: '#menu-box',\n        remote: {\n          url: '/api/getmenus',\n          method: 'post'\n        },\n        cached: false\n      }).render();\n      return that;\n    },\n    tabsInit: function() {\n      tabs.set({\n        onChanged: function(layid) {\n          // var tab = tabs.get(layid);\n          // if (tab !== null) {\n          //   utils.setUrlState(tab.title, tab.path);\n          // }\n        }\n      }).render(function(obj) {\n        // 如果只有首页的选项卡\n        if (obj.isIndex) {\n          route.render('#/');\n        }\n      });\n    }\n  }\n\n  var admin = new Admin();\n  admin.ready(function() {\n    console.log('Init successed.');\n  });\n\n  //输出admin接口\n  exports('admin', {});\n});"]}